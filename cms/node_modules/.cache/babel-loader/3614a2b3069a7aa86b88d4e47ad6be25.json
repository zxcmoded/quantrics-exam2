{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n// Copyright (c) .NET Foundation. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { AbortError } from \"./Errors\";\nimport { HttpClient } from \"./HttpClient\";\nimport { NodeHttpClient } from \"./NodeHttpClient\";\nimport { XhrHttpClient } from \"./XhrHttpClient\";\n/** Default implementation of {@link @microsoft/signalr.HttpClient}. */\n\nvar DefaultHttpClient =\n/** @class */\nfunction (_super) {\n  __extends(DefaultHttpClient, _super);\n  /** Creates a new instance of the {@link @microsoft/signalr.DefaultHttpClient}, using the provided {@link @microsoft/signalr.ILogger} to log messages. */\n\n\n  function DefaultHttpClient(logger) {\n    var _this = _super.call(this) || this;\n\n    if (typeof XMLHttpRequest !== \"undefined\") {\n      _this.httpClient = new XhrHttpClient(logger);\n    } else {\n      _this.httpClient = new NodeHttpClient(logger);\n    }\n\n    return _this;\n  }\n  /** @inheritDoc */\n\n\n  DefaultHttpClient.prototype.send = function (request) {\n    // Check that abort was not signaled before calling send\n    if (request.abortSignal && request.abortSignal.aborted) {\n      return Promise.reject(new AbortError());\n    }\n\n    if (!request.method) {\n      return Promise.reject(new Error(\"No method defined.\"));\n    }\n\n    if (!request.url) {\n      return Promise.reject(new Error(\"No url defined.\"));\n    }\n\n    return this.httpClient.send(request);\n  };\n\n  DefaultHttpClient.prototype.getCookieString = function (url) {\n    return this.httpClient.getCookieString(url);\n  };\n\n  return DefaultHttpClient;\n}(HttpClient);\n\nexport { DefaultHttpClient };","map":{"version":3,"mappings":";;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,UAAT,QAA2B,UAA3B;AACA,SAASC,UAAT,QAAsD,cAAtD;AAEA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,aAAT,QAA8B,iBAA9B;AAEA;;AACA;AAAA;AAAA;EAAuCC;EAGnC;;;EACA,2BAAmBC,MAAnB,EAAkC;IAAlC,YACIC,qBAAO,IADX;;IAGI,IAAI,OAAOC,cAAP,KAA0B,WAA9B,EAA2C;MACvCC,KAAI,CAACC,UAAL,GAAkB,IAAIN,aAAJ,CAAkBE,MAAlB,CAAlB;IACH,CAFD,MAEO;MACHG,KAAI,CAACC,UAAL,GAAkB,IAAIP,cAAJ,CAAmBG,MAAnB,CAAlB;IACH;;;EACJ;EAED;;;EACOK,mCAAP,UAAYC,OAAZ,EAAgC;IAC5B;IACA,IAAIA,OAAO,CAACC,WAAR,IAAuBD,OAAO,CAACC,WAAR,CAAoBC,OAA/C,EAAwD;MACpD,OAAOC,OAAO,CAACC,MAAR,CAAe,IAAIf,UAAJ,EAAf,CAAP;IACH;;IAED,IAAI,CAACW,OAAO,CAACK,MAAb,EAAqB;MACjB,OAAOF,OAAO,CAACC,MAAR,CAAe,IAAIE,KAAJ,CAAU,oBAAV,CAAf,CAAP;IACH;;IACD,IAAI,CAACN,OAAO,CAACO,GAAb,EAAkB;MACd,OAAOJ,OAAO,CAACC,MAAR,CAAe,IAAIE,KAAJ,CAAU,iBAAV,CAAf,CAAP;IACH;;IAED,OAAO,KAAKR,UAAL,CAAgBU,IAAhB,CAAqBR,OAArB,CAAP;EACH,CAdM;;EAgBAD,8CAAP,UAAuBQ,GAAvB,EAAkC;IAC9B,OAAO,KAAKT,UAAL,CAAgBW,eAAhB,CAAgCF,GAAhC,CAAP;EACH,CAFM;;EAGX;AAAC,CAlCD,CAAuCjB,UAAvC","names":["AbortError","HttpClient","NodeHttpClient","XhrHttpClient","__extends","logger","_super","XMLHttpRequest","_this","httpClient","DefaultHttpClient","request","abortSignal","aborted","Promise","reject","method","Error","url","send","getCookieString"],"sourceRoot":"","sources":["../../src/DefaultHttpClient.ts"],"sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\nimport { AbortError } from \"./Errors\";\r\nimport { HttpClient, HttpRequest, HttpResponse } from \"./HttpClient\";\r\nimport { ILogger } from \"./ILogger\";\r\nimport { NodeHttpClient } from \"./NodeHttpClient\";\r\nimport { XhrHttpClient } from \"./XhrHttpClient\";\r\n\r\n/** Default implementation of {@link @microsoft/signalr.HttpClient}. */\r\nexport class DefaultHttpClient extends HttpClient {\r\n    private readonly httpClient: HttpClient;\r\n\r\n    /** Creates a new instance of the {@link @microsoft/signalr.DefaultHttpClient}, using the provided {@link @microsoft/signalr.ILogger} to log messages. */\r\n    public constructor(logger: ILogger) {\r\n        super();\r\n\r\n        if (typeof XMLHttpRequest !== \"undefined\") {\r\n            this.httpClient = new XhrHttpClient(logger);\r\n        } else {\r\n            this.httpClient = new NodeHttpClient(logger);\r\n        }\r\n    }\r\n\r\n    /** @inheritDoc */\r\n    public send(request: HttpRequest): Promise<HttpResponse> {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n\r\n        return this.httpClient.send(request);\r\n    }\r\n\r\n    public getCookieString(url: string): string {\r\n        return this.httpClient.getCookieString(url);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}